
def gv

pipeline {
    agent any
<<<<<<< HEAD
        stages {
        stage("init") {
            steps {
                script {
                    gv =load "script.groovy"
                }
            }
        }
        stage("build") {
            steps {
                script {
                    gv.build()
                }
            }
        }
        stage("test") {
            steps {
                script {
                    gv.test()
                }
            }
        }
        
=======
    tools {
        maven 'maven3'
    }
    stages {
        stage('build') {
            steps{
                sh 'mvn clean package'
            }
        }
        stage('Upoad war file') {
            steps{
                script{
                    def mavenPom = readMavenPom file: 'pom.xml'
                    nexusArtifactUploader artifacts: [
                    [
                        artifactId: 'StandAlone',
                        classifier: '',
                        file: "target/StandAlone-${mavenPom.version}.jar",
                        type: 'jar'
                    ]
                ], 
                        credentialsId: 'fd82a8b5-46a4-4bc7-8903-c88a04387071',
                        groupId: 'com.ravi.p1', 
                        nexusUrl: '172.31.93.166:8081',
                        nexusVersion: 'nexus2',
                        protocol: 'http',
                        repository: 'Maven_Release',
                        version: "${mavenPom.version}"
                }
            }
        }
>>>>>>> 97748c7c66bd9832bb3cad106f4714aeba711357
    }
}

